/* Version 1.3.0, copyright (C) 2017, Siemens AG. All Rights Reserved. */
SWAC.Component=function(a,b,c,d,e){var f=this,g=null,h=a,i=b,j=function(){return c},k=d,l=""!==e&&null!==e&&void 0!==e?e:b.src,m=arguments[5],n=null,o=!1,p="hidden",q=!1,r=new SWAC.Eventing.Publisher("onReady"),s="click dblclick mousedown mousemove mouseup",t=[],u={},v=new SWAC.Authentication(a),w={},x={},y={},z={},A=SWAC.Guid.generate(),B=function(a){var b,c=new SWAC.Defer,d=a?"visible":"hidden";return q?c.reject(new SWAC.Reason(13001)):"ui"!==k.flavor?c.reject(new SWAC.Reason(13002)):d===p?c.fulfill():(b=function(){p=d,i.style.width=a?k.width:"0px",i.style.height=a?k.height:"0px",i.style.display=a?"block":"none",c.fulfill()},SWAC.Communication._internal.beginCall(h,SWAC.Config.TimeOuts.Internal,"show",[a]).then(b,b)),c.promise},C=function(a){var b=new SWAC.Defer,c=function(){SWAC.Container._internal.remove(h,i,a),i=null,q=!0,w=null,y=null,z=null,x=null,n=null};return q?b.reject(new SWAC.Reason(13001)):SWAC.Communication._internal.beginCall(h,SWAC.Config.TimeOuts.Remove,"remove",[a]).then(function(){c(),b.fulfill()},function(a){c(),b.reject(a)}),b.promise},D=function(){var a=new SWAC.Defer;return SWAC.Communication._internal.beginCall(h,SWAC.Config.TimeOuts.CleanUp,"cleanUp",[],!0).then(function(){a.fulfill()},function(b){a.reject(b)}),a.promise},E=function(a,b,c,d){var e=new SWAC.Defer;return q?(e.reject(new SWAC.Reason(13001)),e.promise):"ui"!==k.flavor?(e.reject(new SWAC.Reason(13002)),e.promise):("hidden"!==p&&(i.style.left=a,i.style.top=b,i.style.width=c,i.style.height=d),SWAC.Communication._internal.beginCall(h,SWAC.Config.TimeOuts.Internal,"position",[a,b,c,d]).then(function(){e.fulfill()},function(a){e.reject(a)}),e.promise)},F=function(){return q?null:{left:i.style.left,top:i.style.top,width:i.style.width,height:i.style.height}},G=function(a,b){var c=new SWAC.Defer;return SWAC.Communication._internal.beginCall(h,SWAC.Config.TimeOuts.Proxy.Functions,"call",[a,b]).then(function(a){c.fulfill(a)},function(a){c.reject(a)}),c.promise},H=function(a){var b=new SWAC.Defer;return SWAC.Communication._internal.beginCall(h,SWAC.Config.TimeOuts.Internal,"beginRequestInterface",[a]).then(function(c){c?(n._internal.exposeInterface(c.name,c.api,c.events),n.beginGet(a).then(function(a){b.fulfill(a)},function(a){b.reject(a)})):b.reject(new SWAC.Reason(14001))},function(a){b.reject(a)}),b.promise},I=function(a){return SWAC.Services._internal.beginRequestService(a,h)},J=function(a,b,c){return SWAC.Services._internal.callMethod(h,c,a,b)},K=function(){return function(a,b,c){var d=null,e=null;if("add"===b||"set"===b||"remove"===b)SWAC.Communication._internal.dpcChanged(h,a,b,c);else{if("get"===b)return SWAC.Communication._internal.beginDpcGet(h,a);if("beginset"===b)return"1.0"===f.swacVersion.substr(0,3)||"1.1"===f.swacVersion.substr(0,3)?(d=new SWAC.Defer,SWAC.Communication._internal.dpcChanged(h,a,b,c),d.fulfill({modified:!1}),d.promise):(e=SWAC.Communication._internal.beginDpcSet(h,a,b,c),e.then(function(a){return"object"==typeof a&&"boolean"==typeof a.modified?a:{modified:!1}},function(a){throw a}))}}},L=function(a,b,c,d,e){var f,i,j,k,l,o,p,q=new SWAC.Defer,s=0;e&&(this.swacVersion=e);for(p in a)a.hasOwnProperty(p)&&(k=a[p].join(", "),l="return function ("+k+') { var myargs = Array.prototype.slice.call(arguments, 0); var args = ["'+p+'", myargs ]; return fn.apply( ctx, args ); };',w[p]=new Function("ctx","fn",l)(this,G));for(s=0;s<b.length;s++)o=b[s],x[o]=new SWAC.Eventing.Publisher(o),w[o]=x[o].event;return this.interfaces=n=new SWAC.Interfaces(d,this),f=function(a){q.reject(a)},i=function(){var a=SWAC.Services.list();SWAC.Communication._internal.beginCall(h,SWAC.Config.TimeOuts.Internal,"ready",[a]).then(function(){q.fulfill(),m.notify({name:h},!0),r.notify({name:h},!0)},f)},j=SWAC.DPC._internal.Flags.Proxy|SWAC.DPC.Permissions.Write|SWAC.DPC.Permissions.Read,g=new SWAC.DPC.Node(K(),A,j),u=g.access(A),SWAC.Communication._internal.beginCall(h,SWAC.Config.TimeOuts.Internal,"bind",[]).then(i,f),q.promise},M=function(a,b,c){"string"==typeof c?n._internal.fire(a,b,c):x[a].notify(b)},N=function(a,b,c){var d,e=null;"remove"===b?u.remove(a):"add"===b?(-1!==a.toLowerCase().indexOf("private.")&&(c.flags=c.flags^SWAC.DPC.Permissions.Write),"public"===a?void 0===g.open("public")&&(e=new SWAC.DPC.Node(g,A,SWAC.DPC.Permissions.Read|SWAC.DPC.Permissions.Write|SWAC.DPC._internal.Flags.Proxy,"public"),e.componentVersion=this.swacVersion):u.add(a,c.flags),"private"===a&&(y=g.open("private").access(),this.status=y),"public"===a&&(z=g.open("public").access(),this.dpc=z)):"set"===b&&(-1!==a.toLowerCase().indexOf("private.")&&(c.flags=c.flags^SWAC.DPC.Permissions.Write),u.set(a,null,c.type,c.flags),window.addEventListener||"private.isDirty"===a&&"boolean"==typeof c.value&&SWAC.Container._internal.setComponentInternalStatus(h,c.value)),"set"===b&&-1!==a.toLowerCase().indexOf("private.")&&(d=function(){return function(a){"boolean"==typeof a&&SWAC.Container._internal.setComponentInternalStatus(h,a)}},g.access().open(a).beginGet().then(d()))},O=function(a){C(a)},P=function(a,b){return v._internal.beginHandshake(a,null,b)},Q=function(a){v._internal.receiveMessage(a)},R=function(){return l},S=function(a){l=a},T=function(){return v.getDomain()},U=function(a){var b;for(b=t.length-1;b>=0;b--)t[b].name===a&&t.splice(b,1)},V=function(a){var b;for(b in t)if(t[b].name===a)return t[b];return null},W=function(a){var b={level:"",category:""},c=s.split(" ");return SWAC._internal.Utils.indexOf(c,a)>-1&&(b.level="_nested",b.category="MouseEvents"),b},X=function(a){var b=null,c=null;if(c=W(a.type),""!==c.level)switch(c.category){case"MouseEvents":b=document.createEvent("MouseEvents"),b.initMouseEvent(a.type,a.bubbles,a.cancelable,null,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,i)}return c=null,b},Y=function(a){var b,c=null,d=null;if(d=V(a.type),null!==d){if(c=X(a),c.SWACComponent=f,d.bubble===!0&&i.dispatchEvent(c),d.callback.length>0)for(b=0;b<d.callback.length;b++)d.callback[b]&&d.callback[b](c);d.inherited&&SWAC.Communication._internal.call(null,"manageEvent",[a]),d=null,c=null}},Z=function(a,b){var c,d,e,g=3===arguments.length?arguments[2]:!1,i=null,j=null,k=[],l=!1;if("1.0"===f.swacVersion.substr(0,3)||"1.1"===f.swacVersion.substr(0,3))return!1;if("function"!=typeof a)return!1;for(e=null===a||void 0===a?[]:[a],null===b||void 0===b?c=s.split(" "):SWAC._internal.Utils.isArray(b)?c=b:"string"==typeof b&&(c=[b]),d=0;d<c.length;d++)i=V(c[d]),j=W(c[d]),null===i?""!==j.level&&(t.push({name:c[d],bubble:!1,inherited:g,callback:e.slice(0)}),"_nested"===j.level&&k.push(c[d]),l||(l=!0)):(i.insertFromBubble&&(delete i.insertFromBubble,k.push(i.name)),-1===SWAC._internal.Utils.indexOf(i.callback,a)&&i.callback.push(a),i=null);return k.length>0&&SWAC.Communication._internal.call(h,"enableComponentEvent",[k,j.level]),l},$=function(a){var b,c,d,e=null,f=[],g=function(a){a.inherited===!1&&(e=W(a.name),f.push(a.name))};if("function"==typeof a){for(c in t)t[c].callback.length>0?(d=SWAC._internal.Utils.indexOf(t[c].callback,a),-1!==d&&(t[c].callback.splice(d,1),0===t[c].callback.length&&g(t[c]))):g(t[c]);if(f.length>0){for(b=0;b<f.length;b++)U(f[b]);SWAC.Communication._internal.call(h,"disableComponentEvent",[f,e.level])}}},_=function(a,b){var c,d,e=null,f=null;if("boolean"==typeof a)for(null===b||void 0===b?c=s.split(" "):SWAC._internal.Utils.isArray(b)?c=b:"string"==typeof b&&(c=[b]),d=0;d<c.length;d++)e=V(c[d]),f=W(c[d]),null===e?""!==f.level&&t.push({name:c[d],bubble:a,inherited:!1,callback:[],insertFromBubble:!0}):(e.bubble=a,e=null)};this.beginShow=B,this.beginRemove=C,this.getDomain=T,this.beginPosition=E,this.beginCleanUpRequest=D,this.getPosition=F,this.type=j,this.name=function(){return h},this.hasUI=function(){return"ui"===k.flavor},this.swacVersion="1.0.0",this.onReady=r.event,this.onMouseEvents={subscribe:Z,unsubscribe:$,bubble:_},this._internal={beginExpose:L,close:O,fire:M,dpcChanged:N,beginHandshake:P,tlsMessage:Q,beginRequestInterface:H,beginRequestService:I,callService:J,setCurrentUrl:S,getCurrentUrl:R,iframe:i,lastIsDirtyValue:o,manageEvent:Y,getRegisteredEvent:V},this.proxy=w,this.interfaces=null},SWAC.Container=function(){var a=!1,b=null,c={},d={},e={},f=new SWAC.DPC.Node(null,"Owner",SWAC.DPC.Permissions.Read,"status",!1);f.set("Owner","isDirty",!1,"boolean");var g=new SWAC.Eventing.Publisher("onRemoved"),h=function(b,c,e){d[b]&&(c&&(c.src="about:blank",c.parentNode&&(a=!0,c.parentNode.removeChild(c)),c=null),e=e?e:"",SWAC.Services._internal.removeServices(b),delete d[b],g.notify({name:b,reason:e}))},i=function(a){var b,c=new SWAC.Defer,f=a.parent?a.parent:document.body,g=a.source,i=a.settings,j=a.name,k=null,l=null;return b=document.createElement("iframe"),b.src=g,b.frameBorder=0,b.name=j,b.style.position="absolute",b.SWACLoaded=!1,"ui"===i.flavor||i.left&&i.top?window.addEventListener||i.left&&i.top?(b.style.left=i.left,b.style.top=i.top):(i.left="0px",i.top="0px"):(i.left="0px",i.top="0px"),b.style.width="0px",b.style.height="0px",b.style.display="none",e[a.name].iframe=b,k=function(a){var b=a.target?a.target:a.srcElement;return b?((e[b.name]||d[b.name])&&(b.SWACLoaded===!1?(b.SWACLoaded=!0,c.fulfill(b)):d[b.name]&&h(b.name,b,new SWAC.Reason(15003))),void 0):(c.reject(new SWAC.Reason(13005)),void 0)},b.addEventListener?b.addEventListener("load",k):b.attachEvent("onload",k),l=function(){b.src="about:blank";try{f.removeChild(b),b=null}catch(a){}c.reject(new SWAC.Reason(11014))},b.addEventListener?b.addEventListener("error",l):b.attachEvent("onerror",l),f.appendChild(b),b=null,c.promise},j=new SWAC.Eventing.Publisher("onFailure"),k=function(a,b,c,d){j.notify({name:a,details:{phase:b,reason:c}},d)},l=function(a){var b,c,f=new SWAC.Defer,g=0,j=0,l=0,m=null,n=null,o=null,p=0;if(SWAC._internal.Utils.isArray(a)){for(l=a.length,b=function(){g===l?f.fulfill():g+j===l&&f.reject(new SWAC.Reason(13006))},m=function(){g++,b()},n=function(){j++,b()},o=function(a){SWAC.Container.beginCreate(a).then(m,n)},p=0;p<a.length;p++)e[a[p].name]||d[a[p].name]?(c=document.getElementsByName(a[p].name)[0],c?(j++,b(),k(a[p].name,"creation","Component already present in registry",!0)):(k(a[p].name,"integrityCheck","Component integrity is compromised",!1),h(a[p].name,null,new SWAC.Reason(15005)),o(a[p]))):o(a[p]);return f.promise}return"object"==typeof a&&null!==a?a.source&&a.name?(a.settings||(a.settings={}),a.settings.flavor||(a.settings.flavor="ui"),e[a.name]={name:a.name,type:a.type,state:"pending",settings:a.settings,promise:f,lastUrl:""},i(a).then(function(b){var c=function(){e[a.name]&&"pending"===e[a.name].state&&(b.src="about:blank",b.parentNode&&b.parentNode.removeChild(b),b=null,k(a.name,"creation","Timeout in beginCreateIframe",!0),e[a.name].promise.reject(new SWAC.Reason(13007)),delete e[a.name])};e[a.name]&&(e[a.name].timeout=window.setTimeout(c,SWAC.Config.TimeOuts.Create))},function(a){f.reject(a)}),f.promise):(f.reject(new SWAC.Reason(13008)),f.promise):(f.reject(new SWAC.Reason(13008)),f.promise)},m=function(a,b){var c=b?d:e,f=null,g=null;for(f in c)if(c.hasOwnProperty(f))if(g=c[f],c===e){if(g.iframe.contentWindow===a||g.iframe===a)return g}else if(g._internal.iframe.contentWindow===a||g._internal.iframe===a)return g;return b?void 0:m(a,!0)},n=new SWAC.Eventing.Publisher("onCreated"),o=new SWAC.Eventing.Publisher("onReady"),p=function(a){var b=m(a);return b&&b.promise?(window.clearTimeout(b.timeout),b.state="hidden",d[b.name]=new SWAC.Component(b.name,b.iframe,b.type,b.settings,b.lastUrl,o),d[b.name]._internal.lastIsDirtyValue=!1,b.attributes&&(d[b.name].attributes=b.attributes),b.authentication&&d[b.name]._internal.beginHandshake(SWAC.Config.Container.Authentication.TlsHandler,SWAC.Config.TimeOuts.Authentication.Handshake).then(function(){},function(){var a=d[b.name];a&&a.beginRemove({reason:"auth-failed"})}),delete e[b.name],b.promise.fulfill(),n.notify({name:b.name},!0),!0):!1},q=function(a,b,d,e,f){var g,h,i=!0,j=0,k=0;if(g=function(){return function(a){11005===a.reasonCode&&d.closeOnCleanUpTimeOut||(d.beginCloseDeferer.reject(a),window.clearTimeout(d.beginCloseTimer),delete c[d.guid])}},e._internal.lastIsDirtyValue===!0&&f===!1&&d.closingBroadcast===!0&&e.beginCleanUpRequest().then(null,g()),e._internal.lastIsDirtyValue===!1){for(k=0;k<d.closingComponents.length;k++)null!==d.closingComponents[k].component&&(h=d.closingComponents[k].component._internal.lastIsDirtyValue,h?d.closingBroadcast&&(i=!1):j++,j===d.closingComponents.length&&(d.loopInterrupted=!1));if(d.closingBroadcast&&i||!d.closingBroadcast&&!d.loopInterrupted){for(k=0;k<d.closingComponents.length;k++)null!==d.closingComponents[k].component&&d.closingComponents[k].component.beginRemove();window.clearTimeout(d.beginCloseTimer)}}},r=function(a){var b,c,e,f,g=[],h=0,i=[];if(a){if(a.name)if("string"==typeof a.name){if(!a.type&&!a.dirty)return d[a.name];g.push(d[a.name])}else if("[object Array]"===Object.prototype.toString.call(a.name))for(c in a.name)if(a.name.hasOwnProperty(c))for(b in d)d.hasOwnProperty(b)&&d[b].name()===a.name[c]&&g.push(d[b]);if(a.type)if(a.name)for(h=g.length-1;h>=0;h--)g[h]&&g[h].type()!==a.type&&g.splice(h,1);else for(b in d)d.hasOwnProperty(b)&&d[b].type()===a.type&&g.push(d[b]);if(a.dirty)if(a.name||a.type)for(h=g.length-1;h>=0;h--)g[h]&&g[h]._internal.lastIsDirtyValue!==a.dirty&&g.splice(h,1);else for(b in d)d.hasOwnProperty(b)&&d[b]._internal.lastIsDirtyValue===a.dirty&&g.push(d[b]);if(a.attributes)for(b in d)if(d.hasOwnProperty(b)&&d[b].attributes){f=!0;for(e in a.attributes)if(a.attributes.hasOwnProperty(e)&&(!d[b].attributes.hasOwnProperty(e)||d[b].attributes[e]!==a.attributes[e])){f=!1;break}f&&g.push(d[b])}return g}for(e in d)d.hasOwnProperty(e)&&i.push(d[e]);return i},s=function(){var a=!1,b=r({dirty:!0});b.length>0&&(a=!0),f.set("Owner","isDirty",a,"boolean")},t=function(a,b){var d,e,f,g=r({name:a});if(g){if(d=g._internal.lastIsDirtyValue,g._internal.lastIsDirtyValue=b,d===b)return;s();for(e in c)c.hasOwnProperty(e)&&(f=c[e],SWAC._internal.Utils.indexOf(f.closingComponentsNames,a,0)>-1&&q(a,b,f,g,d))}},u=function(a){var b=r({name:a});if(b)return b._internal.lastIsDirtyValue;throw new SWAC.Exception(1001)},v=function(a){var b=m(a);b&&(window.clearTimeout(b.timeout),b.state="removing",b.promise.reject(new SWAC.Reason(13010)),b.iframe&&(b.iframe.src="about:blank",b.iframe.parentNode&&b.iframe.parentNode.removeChild(b.iframe),b.iframe=null),k(b.name,"creation","Component discarded by communication protocol",!1),delete e[b.name])},w=function(a,b){var c;for(c=0;c<b.closingComponents.length;c++)if(b.closingComponents[c].name===a)return b.closingComponents.splice(c,1),!0;return!1},x=function(a){var b,d;for(b in c)c.hasOwnProperty(b)&&(d=c[b],SWAC._internal.Utils.indexOf(d.closingComponentsNames,a.data.name,0)>-1&&w(a.data.name,d)&&0===d.closingComponents.length&&(d.beginCloseDeferer.fulfill(),delete c[d.guid]))},y=function(a,b,d,e){var f,g=null,h=null,i=!0,j=null,k=null,l=null,m=0,n=SWAC.Guid.generate(),o={guid:n};if(c[n]=o,o.beginCloseDeferer=new SWAC.Defer,d=d||SWAC.Config.TimeOuts.Close,b=null===b||void 0===b?!0:b,e=null!==e&&void 0!==e&&""!==e?e:null!==SWAC.Config.Container.Behaviors.CloseOnCleanUpTimeOut&&void 0!==SWAC.Config.Container.Behaviors.CloseOnCleanUpTimeOut&&""!==SWAC.Config.Container.Behaviors.CloseOnCleanUpTimeOut?SWAC.Config.Container.Behaviors.CloseOnCleanUpTimeOut:null!==SWAC.Config.Container.Behaviors.CloseTimeoutConfirm&&void 0!==SWAC.Config.Container.Behaviors.CloseTimeoutConfirm&&""!==SWAC.Config.Container.Behaviors.CloseTimeoutConfirm?SWAC.Config.Container.Behaviors.CloseTimeoutConfirm:!0,o.closeOnCleanUpTimeOut=e,o.closingBroadcast=b,o.loopInterrupted=!1,null===a||void 0===a)g=r();else{if(SWAC._internal.Utils.isArray(a))for(g=[],m=0;m<a.length;m++)h=r({name:a[m]}),h&&g.push(h);else g=r({name:a}),g&&(g=[g]);if(null===g||void 0===g||0===g.length)return o.beginCloseDeferer.reject(new SWAC.Reason(13015)),delete c[n],o.beginCloseDeferer.promise}for(o.closingComponents=[],o.closingComponentsNames=[],m=0;m<g.length;m++)null!==g[m]&&(o.closingComponentsNames.push(g[m].name()),o.closingComponents.push({component:g[m],name:g[m].name()}));for(j=function(){for(m=0;m<g.length;m++)null!==g[m]&&g[m].beginRemove()},o.beginCloseTimer=window.setTimeout(function(){e?j():(o.beginCloseDeferer.reject(new SWAC.Reason(13011)),delete c[n])},d),k=function(a){if(11005===a.reasonCode&&e){if(b)return;m++,g[m]?(f=g[m]._internal.lastIsDirtyValue,f&&g[m].beginCleanUpRequest().then(l,k)):o.loopInterrupted=!1}else o.beginCloseDeferer.reject(a),window.clearTimeout(o.beginCloseTimer),delete c[n]},l=function(){b||(m++,g[m]?(f=g[m]._internal.lastIsDirtyValue,f&&g[m].beginCleanUpRequest().then(l,k)):o.loopInterrupted=!1)},m=0;m<g.length;m++)if(g[m]&&(f=g[m]._internal.lastIsDirtyValue,f&&(b&&(i=!1),g[m].beginCleanUpRequest().then(l,k),!b))){o.loopInterrupted=!0;break}return(b&&i||!b&&!o.loopInterrupted)&&(j(),window.clearTimeout(o.beginCloseTimer)),o.beginCloseDeferer.promise};return g.event.subscribe(x),n.event.subscribe(function(){window.MutationObserver&&null===b&&(b=new MutationObserver(function(b){b[0].removedNodes.length>0&&"IFRAME"===b[0].removedNodes[0].tagName&&"boolean"==typeof b[0].removedNodes[0].SWACLoaded&&(a?a=!1:(k(b[0].removedNodes[0].name,"integrityCheck","Component integrity is compromised",!1),h(b[0].removedNodes[0].name,null,new SWAC.Reason(15005))))}),b.observe(document.body,{childList:!0,subtree:!0}))}),g.event.subscribe(function(){var a=r();a&&0===a.length&&window.MutationObserver&&null!==b&&(b.disconnect(),b=null)}),{beginCreate:l,beginClose:y,get:r,status:f.access(),onCreated:n.event,onReady:o.event,onRemoved:g.event,onFailure:j.event,_internal:{accept:p,discard:v,remove:h,identify:m,setComponentInternalStatus:t,getComponentInternalStatus:u,fireOnFailure:k}}}(),SWAC.Container.version="1.3.0",SWAC.Interfaces=function(a,b){var c={},d={},e=a,f=b,g=[],h=function(){return e},i=function(a){return SWAC._internal.Utils.indexOf(e,a)>=0},j=function(a){var b;for(b=0;b<g.length;b++)if(g[b].name===a)return!0;return!1},k=function(a,b,c){var d;for(d=g.length-1;d>=0;d--)g[d].name===a&&(c?g[d].defer.reject(b):g[d].defer.fulfill(b),g.splice(d,1))},l=function(a){var b=new SWAC.Defer;return c[a]?b.fulfill(c[a]):i(a)?(j(a)||f._internal.beginRequestInterface(a).then(function(b){k(a,b,!1),SWAC.Communication._internal.call(f.name(),"interfaceReady",[a])},function(b){k(a,b,!0)}),g.push({name:a,defer:b})):b.reject(new SWAC.Reason(14001)),b.promise},m=function(a,b,c){var d=new SWAC.Defer;return SWAC.Communication._internal.beginCall(f.name(),SWAC.Config.TimeOuts.Proxy.Functions,"call",[a,b,c]).then(function(a){d.fulfill(a)},function(a){d.reject(a)}),d.promise},n=function(a,b,e){var f,g,h,i,j,k={},l=0;if(!c[a]){for(f in b)b.hasOwnProperty(f)&&(g=b[f].join(", "),h="return function ("+g+') { var myargs = Array.prototype.slice.call(arguments, 0); var args = ["'+f+'", myargs, "'+a+'" ]; return fn.apply( ctx, args ); };',k[f]=new Function("ctx","fn",h)(this,m));for(l=0;l<e.length;l++)i=e[l],j=new SWAC.Eventing.Publisher(i),d[a]=d[a]||{},d[a][i]=j,k[i]=j.event;c[a]=k}},o=function(a,b,c){d[c]&&d[c][a]&&d[c][a].notify(b)};this.list=h,this.beginGet=l,this.has=i,this._internal={exposeInterface:n,fire:o}},SWAC.Services=function(){var a={},b=[],c=new SWAC.Eventing.Publisher("onServiceCreated"),d={},e=function(){return SWAC._internal.Utils.getOwnPropertyNames(a)},f=function(b,c){return b&&b.match("^[a-zA-Z0-9_.]*$")?a[b]?!1:(a[b]=c,!0):!1},g=function(a){var b,c,d=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,e=/,/,f=/^\s*(_?)(\S+?)\1\s*$/,g=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,h=[],i=a.toString().replace(g,""),j=i.match(d),k=j[1].split(e),l=function(a,b,c){h.push(c)};for(b=0;b<k.length;b++)c=k[b],c.replace(f,l);return d=null,e=null,f=null,g=null,h},h=function(a,b,c){return function(d){SWAC.Communication._internal.fire(a,b,d,c)}},i=function(e,f){var i,j,k,l=null,m={},n=[],o=SWAC._internal.Utils.getOwnPropertyNames(a);if(SWAC._internal.Utils.indexOf(o,e)>=0){i=a[e],j=!(i instanceof Function),j||(d[f]=d[f]||{},d[f][e]?i=d[f][e]:(i=new a[e](f),d[f][e]=i,c.notify({component:f,service:e,instance:i})));for(k in i)if(i.hasOwnProperty(k))if("function"==typeof i[k])m[k]=g(i[k]);else if("object"==typeof i[k]&&i[k].subscribe&&1===i[k].subscribe.length){var p=h(f,k,e);i[k].subscribe(p),b.push({component:f,property:k,handler:p,event:i[k]}),n.push(k)}l={name:e,api:m,events:n}}return l},j=function(a){var c,e=d[a],f=0;for(f=b.length-1;f>=0;f--)b[f].component===a&&(b[f].event.unsubscribe&&b[f].event.unsubscribe(b[f].handler),b.splice(f,1));if(e)for(c=SWAC._internal.Utils.getOwnPropertyNames(e),f=0;f<c.length;f++)delete d[a][c[f]]},k=function(b,c,e,f){var g=null,h=null;return d[b]&&d[b][c]?(g=d[b][c],h=g[e].apply(c,f)):a[c]&&(g=a[c],h=g[e].apply(c,f)),h};return{list:e,register:f,onServiceCreated:c.event,_internal:{beginRequestService:i,removeServices:j,callMethod:k}}}();