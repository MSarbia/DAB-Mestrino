/* Version 1.3.0, copyright (C) 2017, Siemens AG. All Rights Reserved. */
var SWAC=SWAC||{};SWAC.isContainer=!0,SWAC.version="1.3.0",SWAC.Config=function(){return{TimeOuts:{Create:1e3,Remove:2e3,CleanUp:2e4,Internal:1e3,Close:6e4,Proxy:{Functions:2e3,Events:1e3},Authentication:{Handshake:1e4}},Container:{URLs:{BaseLibrary:"",ControlLibrary:""},Authentication:{Request:!1,TlsHandler:null},Behaviors:{CloseOnCleanUpTimeOut:!0}}}}(),SWAC.Exception=function(a){var b;isNaN(a)?(this.errorCode=-1,this.message=a):(this.errorCode=a,b=SWAC.Exception.prototype.exceptionCodes[a],this.message="Internal Error",null!==b&&void 0!==b&&(this.message=b))},SWAC.Exception.prototype=new Error,SWAC.Exception.prototype={exceptionCodes:{1e3:"Only one instance of SWAC.Hub is allowed.",1001:"Component not found.",1002:"Corresponding node does no longer exist.",1003:"No compatible node for the given key.",1004:"No node for the given key.",1005:"Data node with different flags already exist.",1006:"Unable to set value on a structural node.",1007:"Handshake cannot be restarted.",1008:"Authorization handshake not active.",1009:"Handshake no longer active.",1010:"Unable to add and set a sub-key for a data node.",2001:"Permission denied.",3001:"Flags cannot be both Proxy and Stub.",3002:"Invalid Key, key not nullable.",3003:"Invalid Key, key must be a string.",3004:"Invalid Key. Not multiple key accepted.",3005:"Invalid Key. Key cannot start/end with a dot.",3006:"Invalid Key, key cannot be an empty string.",3007:"Invalid flags.",3008:"Value not validated.",3009:"Flags of parent node is 'none', child node must have the same flags value.",4001:"Converter function exception."}},SWAC.Exception.prototype.constructor=SWAC.Exception,SWAC.Exception.prototype.toString=function(){return this.message},SWAC.AccessViolationException=function(a){SWAC.Exception.call(this,a)},SWAC.AccessViolationException.prototype=new SWAC.Exception,SWAC.InvalidArgumentException=function(a){SWAC.Exception.call(this,a)},SWAC.InvalidArgumentException.prototype=new SWAC.Exception,SWAC.InternalException=function(a){SWAC.Exception.call(this,a)},SWAC.InternalException.prototype=new SWAC.Exception,SWAC._internal={},SWAC._internal.Utils=function(){var a=null;a=Object.getOwnPropertyNames?function(a){return Object.getOwnPropertyNames(a)}:function(a){var b,c=[];if("object"==typeof a||"function"==typeof a)for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c};var b=null;b=Array.isArray?function(a){return Array.isArray(a)}:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var c=null;c=Array.indexOf?function(a,b,c){return a.indexOf(b,c)}:function(a,c,d){if(b(a))for(var e=d||0,f=a.length;f>e;e++)if(a[e]===c)return e;return-1};var d=/^\s+|\s+$/g;return{getOwnPropertyNames:a,isArray:b,indexOf:c,trimRegex:d}}(),SWAC.Guid=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},b=function(){return(a()+a()+"-"+a()+"-4"+a().substr(0,3)+"-"+a()+"-"+a()+a()+a()).toLowerCase()};return{generate:b}}(),SWAC.Eventing=function(){var a=function(a){var b=a;return{subscribe:function(a){b.push(a)},unsubscribe:function(a){var c=SWAC._internal.Utils.indexOf(b,a);-1!==c&&b.splice(c,1)}}},b=function(a){var b=[];return{notify:function(c,d){var e,f=b.slice(),g=function(b){c&&c.type===a&&c.data?f[b].call(null,c):f[b].call(null,{type:a,data:c})},h=function(a){setTimeout(function(){g(a)},0)};for(e=0;e<f.length;e++)try{d?h(e):g(e)}catch(i){}return f.length},event:new SWAC.Eventing.EventProxy(b)}},c=function(){this._listeners={}};c.prototype={constructor:c,addListener:function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(b)},fire:function(a,b){var c,d=0,e=0;if("string"==typeof a&&(a={type:a}),!a.type)throw new Error("Event object missing 'type' property.");if(this._listeners[a.type]instanceof Array)if(c=this._listeners[a.type].slice(),b){var f=function(b){b.call(this,a)};for(e=c.length,d=0;e>d;d++)setTimeout(f(c[d]),0)}else for(e=c.length,d=0;e>d;d++)c[d].call(this,a)},removeListener:function(a,b){var c,d=0,e=0;if(this._listeners[a]instanceof Array)for(c=this._listeners[a],e=c.length,d=0;e>d;d++)if(c[d]===b){c.splice(d,1);break}}};var d=function(a){var b=new c,d=a;return{fire:function(a,c){var e={type:d,data:a};b.fire(e,c)},subscribe:function(a){b.addListener(d,a)},unsubscribe:function(a){b.removeListener(d,a)}}};return{Event:d,EventEx:c,Publisher:b,EventProxy:a}}(),SWAC.Defer=function(){this.promise=new SWAC.Promise},SWAC.Defer.prototype={fulfill:function(a){var b,c=this.promise;if("pending"===c.status)for(c.value=a,c.status="fulfilled",b=0;b<c._internal.fulfilled.length;b++)c._internal.executeCallback(c._internal.fulfilled[b].func,c._internal.fulfilled[b].defer,a,c.status)},reject:function(a){var b,c=this.promise;if("pending"===c.status)for(c.reason=a,c.status="rejected",b=0;b<c._internal.rejected.length;b++)c._internal.executeCallback(c._internal.rejected[b].func,c._internal.rejected[b].defer,a,c.status)},bind:function(a){var b=this;return a&&a.then?(a.then(function(a){b.fulfill(a)},function(a){b.reject(a)}),!0):!1}},SWAC.Promise=function(){this._internal={executeCallback:function(a,b,c,d){var e=c;"function"==typeof a?setTimeout(function(){try{e=a(c),"fulfilled"===d?b.fulfill(e):b.reject(e)}catch(f){return b.reject(f),void 0}},0):b&&("fulfilled"===d?b.fulfill(e):b.reject(e))},fulfilled:[],rejected:[]}},SWAC.Promise.all=function(a){var b=new SWAC.Defer,c=0,d=null,e=0,f=[];if(SWAC._internal.Utils.isArray(a)&&a.length>0){for(c=0;c<a.length;c++)if("object"!=typeof a[c]&&"function"!=typeof a[c]&&"function"!=typeof a[c].then)return b.promise.reject(new SWAC.Reason(18e3)),b.promise;for(d=function(c){var d=!1;a[c].then(function(g){"pending"!==b.promise.status||d||(d=!0,e++,f[c]=g,e===a.length&&b.fulfill(f))},function(a){"pending"!==b.promise.status||d||(d=!0,b.reject(a))})},c=0;c<a.length;c++)d(c)}else b.promise.reject(new SWAC.Reason(18001));return b.promise},SWAC.Promise.prototype={status:"pending",reason:null,value:null,then:function(a,b){var c=new SWAC.Defer;return this._internal.fulfilled.push({func:a,defer:c}),this._internal.rejected.push({func:b,defer:c}),"fulfilled"===this.status?this._internal.executeCallback(a,c,this.value,this.status):"rejected"===this.status&&this._internal.executeCallback(b,c,this.reason,this.status),c.promise}},SWAC.Reason=function(a){var b=null;isNaN(a)?(this.errorCode=-1,this.message=a):(this.reasonCode=a,b=SWAC.Reason.prototype.errorCodes[a],this.message="",null!==b&&void 0!==b&&(this.message=b))},SWAC.Reason.prototype={errorCodes:{10001:"Handshake time-out expired. (SWAC.Config.TimeOuts.Authentication.Handshake)",11001:"Time-out expired. (SWAC.Config.TimeOuts.Internal)",11002:"Time-out expired. (SWAC.Config.TimeOuts.Proxy.Functions)",11004:"Time-out expired. (SWAC.Config.TimeOuts.Remove)",11005:"Time-out expired. (SWAC.Config.TimeOuts.CleanUp)",11006:"Unhandled time-out expired.",11007:"Invalid target.",11008:"Result message rejected.",11011:"Container unreachable.",11013:"Component not found.",11014:"Error creating Iframe.",12001:"Service not found.",13001:"Invalid Component.",13002:"Component needs to be UI.",13005:"Error creating Iframe.",13006:"Error during component/s creation.",13007:"Time-out expired during IFrame creation. (SWAC.Config.TimeOuts.Create)",13008:"Container.create: Wrong argument(s).",13009:"Aborted by the user.",13010:"Component has been discarded.",13011:"Time-out expired. (beginClose Time-out)",13014:"Method not supported.",13015:"Specified component/s does/do not exist.",14001:"Interface not found.",15001:"Parameter timeout is not a number.",15004:"Dual boot detected. Component has been removed.",15005:"Component integrity is compromised. Component has been removed.",16001:"Event management is not supported.",16002:"Event is not supported.",17e3:"Value not validated.",17001:"Permission denied.",17002:"Corresponding node does no longer exist.",17003:"Unable to add and set a sub-key for a data node.",17004:"Unable to set value on a structural node.",17005:"Internal error.",17006:"Corresponding node does not exist.",18e3:"Wrong parameter, all array elements should be thenable.",18001:"Wrong parameter, method parameter must be an array with at least one thenable."}},SWAC.Reason.prototype.toString=function(){return this.message},SWAC.Authentication=function(a){var b=new SWAC.Eventing.Publisher("onFailure"),c=new SWAC.Eventing.Publisher("onSuccess"),d=this,e=SWAC.Guid.generate(),f=a,g="",h=null,i=null,j=function(){return null!==h&&"fulfilled"===h.promise.status?!0:!1},k=function(){if(null===h||null===i)throw new SWAC.Exception(1008);if(h&&"pending"!==h.promise.status&&"fulfilled"!==h.promise.status)throw new SWAC.Exception(1009)},l=function(a){k(),SWAC.Communication._internal.call(f,"tlsMessage",[a])},m=function(a,b,c){if(h)throw new SWAC.Exception(1007);return h=new SWAC.Defer,window.setTimeout(function(){h&&"pending"===h.promise.status&&h.reject(new SWAC.Reason(10001))},c||SWAC.Config.TimeOuts.Authentication.Handshake),i=a,b&&l(b),h.promise},n=function(){k(),h.fulfill(),c.notify({})},o=function(a){k(),h.reject(a),b.notify({})},p=function(a){try{k(),i(a,d)}catch(b){}},q=function(){var a,b,c,d,e,h="";return null===f?h=g:(a=SWAC.Container.get({name:f}),a&&!a.promise&&(h=a._internal.getCurrentUrl())),""!==h&&null!==h&&void 0!==h&&(b=new RegExp(/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/),h=b.exec(h),b=null,c=h[1],"file"===c?h=h[10]:(d=h[6],e=h[7],h=""===e||null===e||void 0===e?d:d+":"+e)),h},r=function(a){g=a};this.accept=n,this.reject=o,this.sendMessage=l,this.isAuthenticated=j,this.getDomain=q,this.onFailure=b.event,this.onSuccess=c.event,this._internal={receiveMessage:p,beginHandshake:m,setDomain:r,session:e}},SWAC.Communication=function(){var a={},b=null,c=function(a){return a===window.parent?!1:!0},d=function(a){return"undefined"==typeof window.constructor?a instanceof window.constructor:a.window===a},e=function(a,b){return JSON.stringify({t:a,c:b})},f=function(a,b,c){a.closed||a.postMessage(b,c)},g=function(a,b,c){var d,g,h,i,j,k,l,m;switch(b.message){case"ping":if(d=SWAC.Container._internal.identify(a),!d)break;if(g=SWAC.Config.Container.URLs.BaseLibrary,h="function"==typeof g?g(b.version):g,h=h.replace(SWAC._internal.Utils.trimRegex,""),i=SWAC.Config.Container.Authentication.TlsHandler?SWAC.Config.Container.Authentication.Request?"req":"can":"no",d.lastUrl=c,b.attributes&&(d.attributes=b.attributes),"req"===b.authentication&&"no"===i||"string"!=typeof h)l={message:"peng",reason:"no"===i?"Authentication not supported":"No appropriate SWAC library"},f(a,e("boot",l),"*"),SWAC.Container._internal.discard(a);else{if(d.authentication="req"===b.authentication,l={message:"pong",url:h,name:d.name,type:d.type,authentication:"req"===b.authentication?"can":i,containerVersion:SWAC.version,namespace:"SWAC",_internal:{}},b.extensions&&SWAC.Config.Extensions)for(m=0;m<b.extensions.length;m++)l.extensions=l.extensions||[],SWAC.Config.Extensions[b.extensions[m]]&&l.extensions.push(SWAC.Config.Extensions[b.extensions[m]]);b.attributes&&b.attributes.control&&(h=SWAC.Config.Container.URLs.ControlLibrary,h=h.replace(SWAC._internal.Utils.trimRegex,""),l.extensions=l.extensions||[],l.extensions.unshift(h)),f(a,e("boot",l),"*")}break;case"ok":SWAC.Container._internal.accept(a)?(l={message:"ok2",name:SWAC.Container._internal.identify(a).name()},f(a,e("boot",l),"*")):(j=SWAC.Container._internal.identify(a),k=j instanceof SWAC.Component?j._internal.iframe:j.iframe,SWAC.Container._internal.remove(SWAC.Container._internal.identify(a).name(),k,new SWAC.Reason(15004)),k=null);break;case"failed":SWAC.Container._internal.discard(a);break;case"pong":break;case"ok2":}},h=function(a,b,c,d){if(c){if(a)try{d instanceof SWAC.Reason&&17e3===d.reasonCode?f(a,e("msg",{t:"result",g:b,v:d,s:1,e:0}),"*"):f(a,e("msg",{t:"result",g:b,e:1}),"*")}catch(g){}}else null!==d&&"object"==typeof d&&"function"==typeof d.then?(a&&(d.noProlong||f(a,e("msg",{t:"prolong",g:b}),"*")),d.then(function(c){a&&f(a,e("msg",{t:"result",g:b,v:c,s:0,e:0}),"*")},function(c){a&&f(a,e("msg",{t:"result",g:b,v:c,s:1,e:0}),"*")})):a&&f(a,e("msg",{t:"result",g:b,v:d,e:0}),"*")},i=function(d,e,f){var g=e.g,i=null,j=null,k=null,l=null,m=function(a){return function(b){"string"==typeof g&&h(d,g,a,b)}};switch(c(d)?(l=SWAC.Container._internal.identify(d),l&&!l.promise&&l._internal.setCurrentUrl(f)):b&&b._internal.setDomain(f),e.t){case"call":c(d)?(l=SWAC.Container._internal.identify(d),l&&l._internal[e.m]?(k=l._internal[e.m].apply(l,e.a),m(!1)(k)):m(!0)(null)):b&&b._internal[e.m]?(k=b._internal[e.m].apply(b,e.a),m(!1)(k)):m(!0)(null);break;case"begin":c(d)?(l=SWAC.Container._internal.identify(d),l&&l._internal[e.m]?l._internal[e.m].apply(l,e.a).then(m(!1),m(!0)):m(!0)(null)):b&&b._internal[e.m]?b._internal[e.m].apply(b,e.a).then(m(!1),m(!0)):m(!0)(null);break;case"prolong":i=a[g],i&&(i.prolonged=!0,window.clearTimeout(i.timer));break;case"result":j=a[g],j&&(j.handled=!0,window.clearTimeout(j.timer),e.e?j.promise.reject(new SWAC.Reason(11008)):e.s?j.promise.reject(e.v):j.promise.fulfill(e.v)),delete a[g]}},j=function(a){if("string"==typeof a.data&&a.data.length>0){var b={};try{if(b=JSON.parse(a.data),!(b&&b.t&&b.c))throw new Error("Incompatible message received");if("boot"!==b.t&&"msg"!==b.t)throw new Error("Unknown message received: "+b.t)}catch(c){return}switch(b.t){case"boot":g(a.source,b.c,a.origin);break;case"msg":i(a.source,b.c,a.origin)}}},k=function(a){var b,c;if(null===a||""===a||void 0===a)return window.parent;if(d(a))return a;if(SWAC.Container){if(c=document.getElementsByName(a)[0],!c)return SWAC.Container._internal.fireOnFailure(a,"integrityCheck","Component integrity is compromised",!1),SWAC.Container._internal.remove(a,null,new SWAC.Reason(15005)),null;if(b=SWAC.Container.get({name:a}),b instanceof SWAC.Component)return b._internal.iframe.contentWindow}return null},l=function(a,b,c){var d,g=k(a);g&&(d=e("msg",{t:"call",m:b,a:c}),f(g,d,"*"))},m=function(b,c,d,g,h){var i,j,l=SWAC.Guid.generate(),m=new SWAC.Defer,n=k(b),o=0,p={};return h=h===!0,n?(i=function(){return o=setTimeout(function(){if(!p.handled&&!p.prolonged)switch(d){case"beginExpose":case"show":case"position":case"ready":case"bind":case"beginRequestService":case"beginRequestInterface":case"dpcGet":case"dpcSet":m.reject(new SWAC.Reason(11001));break;case"callService":case"call":m.reject(new SWAC.Reason(11002));break;case"remove":m.reject(new SWAC.Reason(11004));break;case"cleanUp":m.reject(new SWAC.Reason(11005));break;default:m.reject(new SWAC.Reason(11006))}delete a[l]},c)},p={guid:l,promise:m,handled:!1,prolonged:!1,timer:i()},a[l]=p,j=e("msg",{t:h?"begin":"call",g:l,m:d,a:g}),f(n,j,"*")):m.reject(new SWAC.Reason(11007)),m.promise},n=function(a,b,c,d){l(a,"fire",[b,c,d])},o=function(a,b,c,d){l(a,"dpcChanged",[b,c,d])},p=function(a,b){return m(a,SWAC.Config.TimeOuts.Internal,"dpcGet",[b])},q=function(a,b,c,d){return m(a,SWAC.Config.TimeOuts.Internal,"dpcSet",[b,c,d],!0)},r=function(a){b=a},s=function(){window.addEventListener?(window.addEventListener("message",j,!1),window.addEventListener("unload",function(){window.removeEventListener("message",j)})):(window.attachEvent("onmessage",j),window.attachEvent("onunload",function(){window.detachEvent("onmessage",j)}))};return function(){s()}(),{_internal:{beginCall:m,call:l,fire:n,dpcChanged:o,beginDpcGet:p,beginDpcSet:q,associateHub:r,activate:s}}}(),SWAC.Hub=function(a){if("object"==typeof SWAC.Hub.instance)throw new SWAC.Exception(1e3);var b=new SWAC.Eventing.Publisher("onInterfaceActivated"),c=new SWAC.Eventing.Publisher("onReady"),d=new SWAC.Eventing.Publisher("onRemove"),e=new SWAC.Eventing.Publisher("onVisible"),f=new SWAC.Eventing.Publisher("onPosition"),g=new SWAC.Eventing.Publisher("onCleanUp"),h={},i=[],j=null,k=null,l=null,m=SWAC.Guid.generate(),n=a,o=[],p=[],q=[],r={},s={},t=new SWAC.Authentication(null),u=function(a){var b=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,c=/,/,d=/^\s*(_?)(\S+?)\1\s*$/,e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,f=[],g=a.toString().replace(e,""),h=g.match(b),i=0,j=[],k=h[1].split(c),l=function(a,b,c){f.push(c)};for(i=0;i<k.length;i++)j=k[i],j.replace(d,l);return b=null,c=null,d=null,e=null,f},v=function(a,b){return function(c){b&&SWAC._internal.Utils.indexOf(o,b)<0||SWAC.Communication._internal.fire(null,a,c,b)}},w=function(a){var b=!1;return"object"==typeof a&&"string"==typeof a.key&&(b=!0),b},x=function(){var a,b,c,d=n.dpc,e=0;if(j.root.add("private",SWAC.DPC.Permissions.Read),l=new SWAC.DPC.Node(k,m,SWAC.DPC.Permissions.Read|SWAC.DPC.Permissions.Write|SWAC.DPC._internal.Flags.Stub,"public",!0),this.DPC=k.open("public").access(m),this.status=k.open("private").access(),d&&(a=d.structure,a&&SWAC._internal.Utils.isArray(a)))for(e=0;e<a.length;e++)if(b=a[e],w(b)){c=SWAC.DPC.Permissions.Read|SWAC.DPC.Permissions.Write,"string"==typeof b.flags&&("none"===b.flags.toLowerCase()?c=SWAC.DPC.Permissions.None:-1===b.flags.toLowerCase().indexOf("rw")&&-1===b.flags.toLowerCase().indexOf("wr")&&(-1!==b.flags.toLowerCase().indexOf("r")&&(c=SWAC.DPC.Permissions.Read),-1!==b.flags.toLowerCase().indexOf("w")&&(c=SWAC.DPC.Permissions.Write)));try{void 0!==b.value?j.root.open("public").set(b.key,b.value,b.type,c):j.root.open("public").add(b.key,c)}catch(f){}}j.root.open("private").set("isDirty",!1,"boolean",SWAC.DPC.Permissions.Read|SWAC.DPC.Permissions.Write),j.root.onAdded.unsubscribe(j.addHandler),j.root.onRemoved.unsubscribe(j.remHandler),j.root.onValueChanged.unsubscribe(j.setHandler),d&&"function"==typeof d.bind&&d.bind(j.root.open("public"))},y=function(){return function(a,b,c){("add"===b||"set"===b||"remove"===b)&&c.flags!==SWAC.DPC._internal.Flags.Stub&&SWAC.Communication._internal.dpcChanged(null,a,b,c)}},z=function(a){return function(b){var c=y();"onAdded"===a?"node"===b.data.node?c(b.data.key,"add",{isEvent:!0,flags:b.data.flags}):c(b.data.key,"set",{isEvent:!0,flags:b.data.flags}):"onRemoved"===a&&c(b.data.key,"remove",{isEvent:!0})}},A=function(a){e.notify({visible:a})},B=function(a){var b;for(b=q.length-1;b>=0;b--)q[b]===a&&q.splice(b,1)},C=function(a){var b,c={};for(b in a)"object"!=typeof a[b]&&(c[b]=a[b]);b=null,SWAC.Communication._internal.call(null,"manageEvent",[c]),c=null},D=function(a){q.length>0&&SWAC.Container.get({name:a.data.name}).onMouseEvents.subscribe(null,q,!0)},E=function(a,b){var c,d,e,f=null,g=null,h=null,i=[];for(e=SWAC._internal.Utils.isArray(a)?a:[a],c=0;c<e.length;c++)window.addEventListener(e[c],C,!0);if(SWAC.Container&&"_nested"===b){if(f=SWAC.Container.get(),f.length>0){for(c=0;c<f.length;c++){for(g=f[c],d=0;d<e.length;d++)h=g._internal.getRegisteredEvent(e[d]),null!==h?h.inherited=!0:i.push(e[d]);h=null,g.onMouseEvents.subscribe(null,i,!0),i=[]}g=null}for(0===q.length&&SWAC.Container.onReady.subscribe(D),c=0;c<e.length;c++)q.push(e[c]);f=null}},F=function(a,b){var c,d,e,f=null,g=null,h=null;for(e=SWAC._internal.Utils.isArray(a)?a:[a],c=0;c<e.length;c++)window.removeEventListener(e[c],C,!0);if(SWAC.Container&&"_nested"===b){if(f=SWAC.Container.get(),f.length>0)for(c=0;c<f.length;c++){for(g=f[c],d=0;d<e.length;d++)h=g._internal.getRegisteredEvent(e[d]),null!==h&&(h.inherited=!1),h=null;g.onMouseEvents.unsubscribe(),g=null}for(c=0;c<e.length;c++)B(e[c]);0===q.length&&SWAC.Container.onReady.unsubscribe(D),f=null}},G=function(a){p=a,c.notify({})},H=function(a,b,c,d){f.notify({left:a,top:b,width:c,height:d})},I=function(a){var b=new SWAC.Defer,c=d.notify({reason:a,defer:b});return c||b.fulfill(),b.promise.noProlong=!0,b.promise},J=function(a,b,c){var d="string"==typeof c?n.interfaces[c]:n;return d[a].apply(d,b)},K=function(a,b,c){"remove"===b?j.root.remove(a):"add"===b?j.root.add(a,c.flags):"set"===b&&j.root.set(a,c.value,c.type,c.flags,!1)},L=function(a){return j.root.get(a)},M=function(a,b,c){return j.root.beginSet(a,c.value,c.type,c.flags).then(function(a){return a.modified||delete a.data,a},function(a){throw a})},N=function(){var a,b,c,d={},e={},f={},g=new SWAC.Defer,l=SWAC.DPC._internal.Flags.Stub|SWAC.DPC.Permissions.Read|SWAC.DPC.Permissions.Write;a=n.dpc?!0:!1,b=n.interfaces?SWAC._internal.Utils.getOwnPropertyNames(n.interfaces):[];for(c in n)n.hasOwnProperty(c)&&("function"==typeof n[c]?h[c]=u(n[c]):"object"==typeof n[c]&&n[c].subscribe&&1===n[c].subscribe.length&&(n[c].subscribe(v(c)),i.push(c)));return k=new SWAC.DPC.Node(y(),m,l,null,!0),d=z("onRemoved"),e=z("onAdded"),f=z("onValueChanged"),j={},j.root=k.access(m),j.remHandler=d,j.root.onRemoved.subscribe(d),j.addHandler=e,j.root.onAdded.subscribe(e),j.setHandler=f,j.root.onValueChanged.subscribe(f),SWAC.Communication._internal.beginCall(null,SWAC.Config.TimeOuts.Internal,"beginExpose",[h,i,a,b,SWAC.version],!0).then(function(a){g.fulfill(a)},function(a){SWAC.Communication._internal.associateHub(null),g.reject(a)}),g.promise},O=function(a){var b,c={},d=[],e={},f=n.interfaces?SWAC._internal.Utils.getOwnPropertyNames(n.interfaces):[],g=null;if(SWAC._internal.Utils.indexOf(f,a)>=0){e=n.interfaces[a];for(b in e)e.hasOwnProperty(b)&&("function"==typeof e[b]?c[b]=u(e[b]):"object"==typeof e[b]&&e[b].subscribe&&1===e[b].subscribe.length&&(e[b].subscribe(v(b,a)),d.push(b)));g={name:a,api:c,events:d}}return g},P=function(a){return SWAC._internal.Utils.indexOf(o,a)<0?!1:!0},Q=function(a){SWAC._internal.Utils.indexOf(o,a)<0&&(o.push(a),b.notify(a))},R=function(a){SWAC.Communication._internal.call(null,"close",[a])},S=function(a){t._internal.receiveMessage(a)},T=function(a,b,c){return t._internal.beginHandshake(a,b,c)};SWAC.Communication._internal.associateHub(this);var U=function(){var a=new SWAC.Defer,b=g.notify({defer:a});return b||a.fulfill(),a.promise},V=function(){return p},W=function(a){return SWAC._internal.Utils.indexOf(p,a)>=0},X=function(a,b,c){var d=new SWAC.Defer;return SWAC.Communication._internal.beginCall(null,SWAC.Config.TimeOuts.Proxy.Functions,"callService",[a,b,c]).then(function(a){d.fulfill(a)},function(a){d.reject(a)}),d.promise},Y=function(a,b,c){var d,e,f,g,h,i={},j=0;if(!r[a]){for(d in b)b.hasOwnProperty(d)&&(e=b[d].join(", "),f="return function ("+e+') { var myargs = Array.prototype.slice.call(arguments, 0); var args = ["'+d+'", myargs, "'+a+'" ]; return fn.apply( ctx, args ); };',i[d]=new Function("ctx","fn",f)(this,X));for(j=0;j<c.length;j++)g=c[j],h=new SWAC.Eventing.Publisher(g),s[a]=s[a]||{},s[a][g]=h,i[g]=h.event;r[a]=i}},Z=function(a){var b=new SWAC.Defer,c={};return r[a]?b.fulfill(r[a]):W(a)?SWAC.Communication._internal.beginCall(null,SWAC.Config.TimeOuts.Internal,"beginRequestService",[a]).then(function(d){c=d,c?(Y(c.name,c.api,c.events),b.fulfill(r[a])):b.reject(new SWAC.Reason(12001))},function(a){b.reject(a)}):b.reject(new SWAC.Reason(12001)),b.promise},$=function(a,b,c){s[c]&&s[c][a]&&s[c][a].notify(b.data)},_=function(){return t.getDomain()},ab=function(a){t._internal.setDomain(a)};this.beginExpose=N,this.beginAuthenticationHandshake=T,this.close=R,this.getDomain=_,this.isInterfaceActivated=P,this.services={list:V,beginGet:Z,has:W},this.onInterfaceActivated=b.event,this.onReady=c.event,this.onRemove=d.event,this.onVisible=e.event,this.onPosition=f.event,this.onCleanUp=g.event,this._internal={bind:x,remove:I,ready:G,show:A,enableComponentEvent:E,disableComponentEvent:F,position:H,call:J,fire:$,dpcChanged:K,dpcGet:L,dpcSet:M,tlsMessage:S,cleanUp:U,beginRequestInterface:O,interfaceReady:Q,setDomain:ab},SWAC.Hub.instance=this},SWAC.DPC=SWAC.DPC||{},SWAC.DPC.Data=function(a,b,c,d,e,f){var g=this,h=b,i=7===arguments.length?arguments[6]:!1,j=function(a,b,c,d){if(b===!1&&(null===a||void 0===a))throw new SWAC.InvalidArgumentException(3002);if(null!==a&&void 0!==a){if("string"!=typeof a)throw new SWAC.InvalidArgumentException(3003);if(c===!1&&-1!==a.indexOf("."))throw new SWAC.InvalidArgumentException(3004);if(d===!1&&""===a.replace(SWAC._internal.Utils.trimRegex,""))throw new SWAC.InvalidArgumentException(3006)}};j(d,!1,!1,!1);var k,l=function(a){var b=SWAC.DPC._internal.Flags.None;if("string"==typeof a||"boolean"==typeof a||"function"==typeof a||"object"==typeof a&&null!==a)throw new SWAC.InvalidArgumentException(3007);if(null===a||void 0===a)return SWAC.DPC.Permissions.Read|SWAC.DPC.Permissions.Write;if(0>a)throw new SWAC.InvalidArgumentException(3007);if((a&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub&&(b|=SWAC.DPC._internal.Flags.Stub),(a&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy&&(b|=SWAC.DPC._internal.Flags.Proxy),(a&SWAC.DPC.Permissions.Read)===SWAC.DPC.Permissions.Read&&(b|=SWAC.DPC.Permissions.Read),(a&SWAC.DPC.Permissions.Write)===SWAC.DPC.Permissions.Write&&(b|=SWAC.DPC.Permissions.Write),(b&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub&&(b&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy)throw new SWAC.InvalidArgumentException(3001);return b},m=l(c),n=!1,o=d,p=e,q=f,r=(m&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy,s=(m&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub,t=function(a){return h===a?!0:!1},u=function(a){return!t(a)&&(r||s)||i},v=function(a,b,c){return k&&k._internal&&k._internal.forward?k._internal.forward(a,b,c):void 0},w=function(){return m},x=function(a){if(t(a)||(w()&SWAC.DPC.Permissions.Read)===SWAC.DPC.Permissions.Read)return r&&u(a)?v(o,"get",{}):p;throw new SWAC.AccessViolationException(2001)},y=function(){var a=null;return k&&k._internal&&k._internal.getPublicNode&&(a=k._internal.getPublicNode()),a},z=new SWAC.Eventing.Publisher("onBeforeValueChanged"),A=function(a){var b=a.currentValue,c=a.key,d=a.value;z.notify(a),(null===a.reject||void 0===a.reject)&&(a.reject=!1),(null===a.value||void 0===a.value)&&(a.value=d),a.reject||k&&k._internal&&k._internal.fireOnBeforeValueChanged&&(a.currentValue=b,a.key=c,k._internal.fireOnBeforeValueChanged(a))},B=new SWAC.Eventing.Publisher("onValueChanged"),C=function(a,b){B.notify({key:o,value:a,oldValue:b}),k&&k._internal&&k._internal.fireOnValueChanged&&k._internal.fireOnValueChanged(o,a,b)},D=function(a,b){var c,d,e=null,f={key:o,value:b,currentValue:p,reject:!1};if(r||A(f),!f.reject){if(c=3===arguments.length?arguments[2]:!0,!t(a)&&(w()&SWAC.DPC.Permissions.Write)!==SWAC.DPC.Permissions.Write)throw new SWAC.AccessViolationException(2001);u(a)&&c?(r||m!==SWAC.DPC._internal.Flags.Stub)&&v(o,"set",{value:r?f.value:null}):r||(SWAC.Hub&&SWAC.Hub.prototype.containerVersion&&"1.0.0"===SWAC.Hub.prototype.containerVersion?(r||m!==SWAC.DPC._internal.Flags.Stub)&&v(o,"set",{value:f.value}):(r||m!==SWAC.DPC._internal.Flags.Stub)&&v(o,"set",{value:null})),r?(e=y(),(t(a)||e&&e.componentVersion&&"1.0.0"===e.componentVersion)&&C()):(d=p,p=f.value,C(p,d))}},E=function(a,b){var c,d=new SWAC.Defer,e={key:o,value:b,currentValue:p,reject:!1},f=null;if(t(a)||(w()&SWAC.DPC.Permissions.Write)===SWAC.DPC.Permissions.Write){if(r)return f=v(o,"beginset",{value:e.value}),f.then(function(a){var c=a;return c.modified||(c.data=b),c},function(a){throw a});A(e),e.reject?d.reject(new SWAC.Reason(17e3)):(c=p,p=e.value,C(p,c),(r||m!==SWAC.DPC._internal.Flags.Stub)&&v(o,"set",{value:null}),d.fulfill({modified:!SWAC.DPC.Node.prototype._equals(p,b),data:p}))}else d.reject(new SWAC.Reason(17001));return d.promise},F=function(){return q},G=function(){var a=m;return(a&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub&&(a^=SWAC.DPC._internal.Flags.Stub),(a&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy&&(a^=SWAC.DPC._internal.Flags.Proxy),a},H=function(a){return void 0!==a&&(n=!0),n},I=new SWAC.Eventing.Publisher("onRemoved"),J=function(){I.notify({key:o}),k&&k._internal&&k._internal.fireOnRemoved&&k._internal.fireOnRemoved(o)};if(this.get=x,this.set=D,this.beginSet=E,this.type=F,this.flags=G,this.onRemoved=I.event,this.onBeforeValueChanged=z.event,this._internal={fireOnRemoved:J,fireOnBeforeValueChanged:A,dirty:H,mine:t},this.access=function(a){var b=function(){if(H())throw new SWAC.Exception(1002)},c={type:function(){return b(),F()},flags:function(){return b(),G()},onRemoved:I.event};if(t(a)||(w()&SWAC.DPC.Permissions.Read)===SWAC.DPC.Permissions.Read){var d=function(){return b(),x(a)};r&&u(a)?c.beginGet=d:(c.get=d,c.onBeforeValueChanged=z.event),c.onValueChanged=B.event}return(t(a)||(w()&SWAC.DPC.Permissions.Write)===SWAC.DPC.Permissions.Write)&&(c.set=function(c){var d=2===arguments.length?arguments[1]:!0;b(),D(a,c,d)},c.beginSet=function(b){var c=2===arguments.length?arguments[1]:!0;if(H()){var d=new SWAC.Defer;return d.reject(new SWAC.Reason(17002)),d.promise}return E(a,b,c)}),c},a instanceof SWAC.DPC.Node){if(!a._internal.mine(b))throw new SWAC.AccessViolationException(2001);k=a,a.add(b,d,c,g,e)}else k=void 0},SWAC.DPC._internal=SWAC.DPC._internal||{},SWAC.DPC._internal.Flags={None:0,Proxy:128,Stub:256},SWAC.DPC.Node=function(a,b,c,d){var e=function(a,b,c,d){if(b===!1&&(null===a||void 0===a))throw new SWAC.InvalidArgumentException(3002);if(null!==a&&void 0!==a){if("string"!=typeof a)throw new SWAC.InvalidArgumentException(3003);if(c===!1&&-1!==a.indexOf("."))throw new SWAC.InvalidArgumentException(3004);if(0===a.indexOf(".")||a.length>0&&a.lastIndexOf(".")===a.length-1)throw new SWAC.InvalidArgumentException(3005);if(d===!1&&""===a.replace(SWAC._internal.Utils.trimRegex,""))throw new SWAC.InvalidArgumentException(3006)}};e(d,!0,!1,!1);var f,g=this,h=5===arguments.length?arguments[4]:!1,i=d,j=function(a){var b=SWAC.DPC._internal.Flags.None;if("string"==typeof a||"boolean"==typeof a||"function"==typeof a||"object"==typeof a&&null!==a)throw new SWAC.InvalidArgumentException(3007);if(null===a||void 0===a)return SWAC.DPC.Permissions.Read|SWAC.DPC.Permissions.Write;if(0>a)throw new SWAC.InvalidArgumentException(3007);if((a&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub&&(b|=SWAC.DPC._internal.Flags.Stub),(a&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy&&(b|=SWAC.DPC._internal.Flags.Proxy),(a&SWAC.DPC.Permissions.Read)===SWAC.DPC.Permissions.Read&&(b|=SWAC.DPC.Permissions.Read),(a&SWAC.DPC.Permissions.Write)===SWAC.DPC.Permissions.Write&&(b|=SWAC.DPC.Permissions.Write),(b&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub&&(b&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy)throw new SWAC.InvalidArgumentException(3001);return b},k="function"==typeof a?a:void 0,l=b,m=j(c),n=!1,o={},p=function(a){return void 0!==a&&(n=!0),n},q=(m&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy,r=(m&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub,s=function(a){return l===a?!0:!1},t=function(a){return s(a)},u=t,v=function(a){return!s(a)&&(q||r)||h},w=function(){return SWAC._internal.Utils.getOwnPropertyNames(o).sort()},x=function(a){var b,c,d=1;if(e(a,!1,!0,!1),""===a||null===a)return g;if(a.indexOf(".")>-1){if(b=a.split("."),c=x(b[0]),void 0===c)return void 0;for(d=1;d<b.length;d++){if(void 0===c)return void 0;c=c.open(b[d])}return c}return void 0!==o[a]&&(o[a]instanceof SWAC.DPC.Node||o[a]instanceof SWAC.DPC.Data)?o[a]:void 0},y=function(){return m},z=function(a,b){var c,d,f=1,g=new SWAC.Defer;if(e(b,!1,!0,!0),s(a)||(y()&SWAC.DPC.Permissions.Read)===SWAC.DPC.Permissions.Read){if(""===b||null===b)return q?(g.reject(new SWAC.Reason(17006)),g.promise):void 0;if(b.indexOf(".")>-1){if(c=b.split("."),d=x(c[0]),void 0===d)return q?(g.reject(new SWAC.Reason(17006)),g.promise):void 0;if(d instanceof SWAC.DPC.Data&&c.length>1)return q&&v(a)?(g.reject(new SWAC.Reason(17006)),g.promise):void 0;for(f=1;f<c.length-1;f++){if(void 0===d)return q&&v(a)?(g.reject(new SWAC.Reason(17006)),g.promise):void 0;d=d.open(c[f])}return void 0===d?q?(g.reject(new SWAC.Reason(17006)),g.promise):void 0:d.get(a,c[c.length-1])}if(void 0!==o[b]&&o[b]instanceof SWAC.DPC.Data&&o[b].get)return o[b].get(a);if(void 0!==o[b])throw new SWAC.Exception(1003);throw new SWAC.Exception(1004)}throw new SWAC.AccessViolationException(2001)},A=function(a){if(a=void 0===a||null===a?m:a,m===SWAC.DPC._internal.Flags.Stub&&a!==m)throw new SWAC.InvalidArgumentException(3009);
return(m&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub?((a&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy&&(a^=SWAC.DPC._internal.Flags.Proxy),a|=SWAC.DPC._internal.Flags.Stub):(m&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy&&((a&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub&&(a^=SWAC.DPC._internal.Flags.Stub),a|=SWAC.DPC._internal.Flags.Proxy),a},B=function(a){var b=a;return i&&f&&(b=i+"."+b),b},C=function(a,b,c){var d=B(a);return k&&"function"==typeof k?k(d,b,c):f&&f._internal&&f._internal.forward?f._internal.forward(d,b,c):void 0},D=function(a,b,c,d,f){var i,j=arguments.length>=6?arguments[5]:!0,k=g,n=0;if(e(b,!1,!0,!1),s(a)||(y()&SWAC.DPC.Permissions.Write)===SWAC.DPC.Permissions.Write){if(f=A(f),b.indexOf(".")>-1){for(i=b.split("."),n=0;n<i.length-1;n++){if(!(k instanceof SWAC.DPC.Node))throw new SWAC.Exception(1010);if(SWAC._internal.Utils.indexOf(k.list(),i[n])>=0)k=k.open(i[n]);else{if(!s(a))throw new SWAC.Exception(2001);k=k.add(a,i[n],f)}}if(k instanceof SWAC.DPC.Node)return k.set(a,i[i.length-1],c,d,f,j);throw new SWAC.Exception(1010)}if(void 0===o[b]){if(!s(a))throw new SWAC.Exception(2001);v(a)&&j&&(q||m!==SWAC.DPC._internal.Flags.Stub)&&C(b,"set",{value:c,type:d,flags:f}),o[b]=new SWAC.DPC.Data(g,l,f,b,c,d,h)}else{if(!(o[b]instanceof SWAC.DPC.Data))throw new SWAC.Exception(1006);o[b].set(a,c,j)}return o[b]}throw new SWAC.AccessViolationException(2001)},E=function(a,b,c,d,f){var i=new SWAC.Defer;try{var j,k=arguments.length>=6?arguments[5]:!0,m=g,n=0,p=null,r=null;if(e(b,!1,!0,!1),s(a)||(y()&SWAC.DPC.Permissions.Write)===SWAC.DPC.Permissions.Write){if(f=A(f),b.indexOf(".")>-1){for(j=b.split("."),n=0;n<j.length-1;n++){if(!(m instanceof SWAC.DPC.Node))return i.reject(new SWAC.Reason(17003)),i.promise;if(SWAC._internal.Utils.indexOf(m.list(),j[n])>=0)m=m.open(j[n]);else{if(!s(a))return i.reject(new SWAC.Reason(17001)),i.promise;m=m.add(a,j[n],f)}}return m instanceof SWAC.DPC.Node?p=m.beginSet(a,j[j.length-1],c,d,f,k):(i.reject(new SWAC.Reason(17003)),i.promise)}if(r=function(a,b){var c=null,d=null;return q?(b.modified||(b.data=a),c=b):b&&"object"==typeof b&&"boolean"==typeof b.modified?c=b:(d={modified:!1},SWAC.DPC.Node.prototype._equals(b,a)||(d.modified=!0,d.data=b),c=d),c},void 0===o[b])return s(a)?q?C(b,"beginset",{value:c,type:d,flags:f}):(o[b]=new SWAC.DPC.Data(g,l,f,b,void 0,d,h),o[b].beginSet(a,c,k).then(function(a){i.fulfill(r(c,a))},function(a){i.reject(a)}),i.promise):(i.reject(new SWAC.Reason(17001)),i.promise);if(o[b]instanceof SWAC.DPC.Data)return o[b].beginSet(a,c,k).then(function(a){i.fulfill(r(c,a))},function(a){i.reject(a)}),i.promise;i.reject(new SWAC.Reason(17004))}else i.reject(new SWAC.Reason(17001))}catch(t){i.reject(new SWAC.Reason(17005))}return i.promise},F=new SWAC.Eventing.Publisher("onAdded"),G=function(a,b,c,d){var e=B(a);(-1!==e.indexOf("public.")||-1!==e.indexOf("private."))&&(e=e.substr(e.indexOf(".")+1)),F.notify("node"===b?{key:e,node:b,flags:d}:{key:e,node:b,value:c,flags:d}),f&&f._internal&&f._internal.fireOnAdded&&f._internal.fireOnAdded(e,b,c,d)},H=function(a,b,c,d,f){var i,j,k=1;if(e(b,!1,!0,!1),!t(a))throw new SWAC.AccessViolationException(2001);if(c=A(c),b.indexOf(".")>-1){for(i=b.split("."),j=H(a,i[0],c),k=1;k<i.length;k++)j=j.add(a,i[k],c);return j}return void 0===o[b]&&(null===d||void 0===d?(v(a)&&(q||m!==SWAC.DPC._internal.Flags.Stub)&&C(b,"add",{flags:c}),o[b]=new SWAC.DPC.Node(g,l,c,b,h)):(o[b]=d,d instanceof SWAC.DPC.Node?G(b,"node",null,c):G(b,"data",f,c))),o[b]},I=function(a,b){var c,d,f,g,h,i=1;if(e(b,!1,!0,!1),!u(a))throw new SWAC.AccessViolationException(2001);if(b.indexOf(".")>-1){for(c=b.split("."),d=x(c[0]),i=1;i<c.length-1;i++){if(void 0===d)return!1;d=d.open(c[i])}return void 0===d?!1:d.remove(a,c[c.length-1])}if(void 0!==o[b]){if(o[b]instanceof SWAC.DPC.Node)for(g=o[b].list(),h=g.length-1;h>-1;h--)o[b].remove(a,g[h]);return f=o[b],f._internal.dirty(!0),v(a)&&(q||m!==SWAC.DPC._internal.Flags.Stub)&&C(b,"remove",{}),o[b]=null,delete o[b],(f instanceof SWAC.DPC.Data||q)&&f._internal.fireOnRemoved(),!0}return!1},J=function(){var a=m;return(a&SWAC.DPC._internal.Flags.Stub)===SWAC.DPC._internal.Flags.Stub&&(a^=SWAC.DPC._internal.Flags.Stub),(a&SWAC.DPC._internal.Flags.Proxy)===SWAC.DPC._internal.Flags.Proxy&&(a^=SWAC.DPC._internal.Flags.Proxy),a},K=new SWAC.Eventing.Publisher("onValueChanged"),L=function(a,b,c){var d=B(a);(-1!==d.indexOf("public.")||-1!==d.indexOf("private."))&&(d=d.substr(d.indexOf(".")+1)),K.notify({key:d,value:b,oldValue:c}),f&&f._internal&&f._internal.fireOnValueChanged&&f._internal.fireOnValueChanged(d,b,c)},M=new SWAC.Eventing.Publisher("onRemoved"),N=function(a){var b=a?B(a):i;(-1!==b.indexOf("public.")||-1!==b.indexOf("private."))&&(b=b.substr(b.indexOf(".")+1)),M.notify({key:b}),f&&f._internal&&f._internal.fireOnRemoved&&f._internal.fireOnRemoved(b)},O=new SWAC.Eventing.Publisher("onBeforeValueChanged"),P=function(a){var b=a.currentValue,c=B(a.key),d=a.value;O.notify(a),(null===a.reject||void 0===a.reject)&&(a.reject=!1),(null===a.value||void 0===a.value)&&(a.value=d),a.reject||f&&f._internal&&f._internal.fireOnBeforeValueChanged&&(a.currentValue=b,a.key=c,f._internal.fireOnBeforeValueChanged(a))},Q=function(){var a=null;return"public"===i?g:a=f&&f._internal&&f._internal.getPublicNode?f._internal.getPublicNode():o["public"]};if(this.get=z,this.set=D,this.beginSet=E,this.open=x,this.add=H,this.remove=I,this.list=w,this.flags=J,this.nestedKey=B,this.onBeforeValueChanged=O.event,this._internal={forward:C,getPublicNode:Q,fireOnAdded:G,fireOnRemoved:N,fireOnValueChanged:L,fireOnBeforeValueChanged:P,dirty:p,mine:s},this.access=function(a){var b=function(){if(p())throw new SWAC.Exception(1002)},c={list:function(){return b(),w()},open:function(c){var d={};return b(),d=x(c),d instanceof SWAC.DPC.Node||d instanceof SWAC.DPC.Data?d.access(a):void 0},flags:function(){return b(),J()},onRemoved:M.event,onAdded:F.event};if(s(a)||(y()&SWAC.DPC.Permissions.Read)===SWAC.DPC.Permissions.Read){var d=function(c){return b(),z(a,c)};q&&v(a)?c.beginGet=d:(c.get=d,c.onBeforeValueChanged=O.event),c.onValueChanged=K.event}return(s(a)||(y()&SWAC.DPC.Permissions.Write)===SWAC.DPC.Permissions.Write)&&(c.set=function(c,d,e,f){var g=arguments.length>=5?arguments[4]:!0,h={};return b(),h=D(a,c,d,e,f,g),h instanceof SWAC.DPC.Data?h.access(a):void 0},c.beginSet=function(b,c,d,e){var f=arguments.length>=5?arguments[4]:!0,g=new SWAC.Defer;return p()?(g.reject(new SWAC.Reason(17002)),g.promise):E(a,b,c,d,e,f)}),t(a)&&(c.remove=function(c){return b(),I(a,c)},c.add=function(c,d){var e={};return b(),e=H(a,c,d),e instanceof SWAC.DPC.Node?e.access(a):void 0}),c},a instanceof SWAC.DPC.Node){if(!a._internal.mine(b))throw new SWAC.AccessViolationException(2001);f=a,a.add(b,d,c,g)}else f=void 0},SWAC.DPC.Node.prototype._equals=function(a,b){var c,d=!0,e=typeof a,f=typeof b,g=null,h=null;if(e!==f)d=!1;else if("object"===e)if(SWAC._internal.Utils.isArray(a)&&SWAC._internal.Utils.isArray(b)){if(a.length!==b.length)d=!1;else for(c=0;c<a.length;c++)if(!SWAC.DPC.Node.prototype._equals(a[c],b[c])){d=!1;break}}else if(SWAC._internal.Utils.isArray(a)||SWAC._internal.Utils.isArray(b))d=!1;else if(null===a&&null===b)d=!0;else if(null===a||null===b)d=!1;else if(g=SWAC._internal.Utils.getOwnPropertyNames(a),h=SWAC._internal.Utils.getOwnPropertyNames(b),g.length!==h.length)d=!1;else for(c=0;c<g.length;c++){if(-1===h.indexOf(g[c])){d=!1;break}if(!SWAC.DPC.Node.prototype._equals(a[g[c]],b[g[c]])){d=!1;break}}else d=a===b;return d},SWAC.DPC.Permissions={None:0,Read:1,Write:2};